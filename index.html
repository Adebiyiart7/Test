<!DOCTYPE html>
<html>
  <head>
    <script>
      function triggerBiometricAuth() {
        // Check if the browser supports biometric authentication
        if ("credentials" in navigator) {
          // Request biometric authentication
          navigator.credentials
            .create({
              publicKey: {
                // Use the challenge property to create a nonce
                challenge: new Uint8Array([1, 2, 3, 4, 5]),
                // Use the rp property to specify the relying party
                rp: {
                  name: "My App",
                },
                // Use the user property to specify the user account
                user: {
                  id: new Uint8Array([6, 7, 8, 9]),
                  name: "ade@example.com",
                  displayName: "Jane Doe",
                },
                pubKeyCredParams: [{alg: -7, type: 'public-key'}]
              },
            })
            .then(function (assertion) {
              // Send the assertion to the server for verification
            alert(JSON.stringify(assertion))
            console.log("assertion", assertion)
              fetch("/verify", {
                method: "POST",
                body: assertion,
              });
            })
            .catch(function (error) {
              console.log(error);
            }); 
        } else {
          alert("This browser does not support biometric authentication.");
        }
      }
      
       function getUserInfo() {
        // check if the browser supports credentials
if ("credentials" in navigator) {
          navigator.credentials.get({
            publicKey: {
                // Use the challenge property to create a nonce
                challenge: new Uint8Array([1, 2, 3, 4, 5]),
                // Use the rp property to specify the relying party
                
              },
          
          
          }
                                   
                                   ).then(function (cred) {
            if (cred) {
              console.log(cred.response);
              alert("User Credentials :" + JSON.stringify(cred.response));
            }
          });
        } else {
          alert("This browser does not support credentials.");
        }
      }
    </script>
  </head>
  <body>
    <button onclick="triggerBiometricAuth()">Trigger Biometric Authentication</button>
      <button onclick="getUserInfo()">Get User Info</button>
  </body>
</html>

